<html>
<!-- Copyright 2010 Karl Hillesland and Vincent Scheib -->
<head>
<title>Lines</title>
<script type="application/x-javascript">

var numLines;
var lineWidth;
var context = null;

var width=500;
var height=500;
var scale = 1.0;

var offsetInner1_seed=Math.random();
var offsetInner2_seed=Math.random();
var offsetInner3_seed=Math.random();
var offsetInner4_seed=Math.random();
var offsetOuter1_seed=Math.random();
var offsetOuter2_seed=Math.random();
var offsetOuter3_seed=Math.random();
var offsetOuter4_seed=Math.random();
var offsetInner1;
var offsetInner2;
var offsetInner3;
var offsetInner4;
var offsetOuter1;
var offsetOuter2;
var offsetOuter3;
var offsetOuter4; 
var periods1x;
var periods1y;
var periods2x;
var periods2y;
var inside_scale;
var outside_scale;
var changerate_i;
var changerate_o;

function init()
{
		window.canvasTimer = setInterval(draw, 16);
		var canvas = document.getElementById("canvas");
		context = canvas.getContext("2d");
}

function changeNumber(intial_rand_0_to_1, changerate, scale, time)
{
	return scale * Math.sin(time * changerate + intial_rand_0_to_1 * 2.0 * Math.PI);
}

function changeNumbers(time)
{
	offsetInner1=changeNumber(offsetInner1_seed, changerate_i, inside_scale, time);
	offsetInner2=changeNumber(offsetInner2_seed, changerate_i, inside_scale, time);
	offsetInner3=changeNumber(offsetInner3_seed, changerate_i, inside_scale, time);
	offsetInner4=changeNumber(offsetInner4_seed, changerate_i, inside_scale, time);
	offsetOuter1=changeNumber(offsetOuter1_seed, changerate_o, outside_scale, time);
	offsetOuter2=changeNumber(offsetOuter2_seed, changerate_o, outside_scale, time);
	offsetOuter3=changeNumber(offsetOuter3_seed, changerate_o, outside_scale, time);
	offsetOuter4=changeNumber(offsetOuter4_seed, changerate_o, outside_scale, time); 	
}

function drawLine(t)
{
	var x1 = Math.sin(2*Math.PI*(t+offsetInner1)*periods1x+offsetOuter1);
	var y1 = Math.cos(2*Math.PI*(t+offsetInner2)*periods1y+offsetOuter2);
	var x2 = Math.sin(2*Math.PI*(t+offsetInner3)*periods2x+offsetOuter3);
	var y2 = Math.cos(2*Math.PI*(t+offsetInner4)*periods2y+offsetOuter4);

	context.moveTo(x1 * scale + width/2.0, y1 * scale + height/2.0);
	context.lineTo(x2 * scale + width/2.0, y2 * scale + height/2.0);
}

function draw() 
{
	var canvas = document.getElementById("canvas");
	
	// Update width and height
	width = canvas.width //= document.body.offsetWidth;
	height = canvas.height //= document.body.offsetHeight;
	if (width > height)
	{
		scale = width/2.0;
	}
	else
	{
		scale = height/2.0;
	}
	scale *= .9
	
	// Update slider variables
	numLines = 100;
	lineWidth = 2;
	inside_scale = eval(100/100.0);
	outside_scale = eval(100/100.0);
	changerate_i = eval(5/1000.0);
	changerate_o = eval(5/1000.0);
	periods1x = 1;
	periods1y = 2;
	periods2x = 2;
	periods2y = 3;

	changeNumbers(new Date().getTime()/60.0);
	
	context.clearRect(0,0,width,height);
	context.lineWidth = lineWidth;
	context.beginPath();
	for(var i=0.0; i<=(1-1.0/numLines/2); i+= 1.0/numLines)
	{
	  	drawLine(i);
	}
	context.stroke();
}
</script>
</head>
<body onLoad="init();">
<canvas id="canvas" width="300" height="300">Error: No support for HTML canvas.</canvas>
</body>
</html>
